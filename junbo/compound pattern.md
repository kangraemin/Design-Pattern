# compound pattern

# Compound Pattern이란?

컴파운드 패턴(Compound Pattern)은 일련의 패턴을 함께 사용하여 다양한 디자인 문제를 해결한다.

반복적으로 생길 수 있는 일반적인 문제를 해결하기 위한 용도로 사용된다.

간단히 설명하면 패턴으로 이루어진 패턴이다.

## MVC 패턴

MVC(Model-View-Controller) 패턴는 하나의 애플리케이션, 프로젝트를 구성할 때 그 구성요소를 모델, 뷰, 컨트롤러라는 세가지 역할로 구분한 패턴이다.

요약하면 다음과 같다.

- `Model`: 애플리케이션의 데이터, 자료를 의미한다.
- `View`: 사용자에게 보여지는 부분, 즉 UI를 의미한다.
- `Controller`: Model과 View사이를 이어주는 브릿지(Bridge)역할을 의미한다.

### 모델, Model

> 프로그램에 사용되는 데이터를 의미하며 데이터베이스(DB), 상수, 문자열과 같은 변수들, 비전 프로그램이라면 카메라 정보와 같은 것들이 해당된다. 모델에는 뷰나 컨트롤러의 정보가 전혀 없다. 단지, 정보만 반환하거나 설정할 수 있다.
> 

- 사용자가 편집하길 원하는 모든 데이터를 가지고 있어야 한다.
- 뷰나 컨트롤러에 대해서 어떤 정보도 알지 말아야 한다.
- 변경이 일어나면 변경 통지에 대한 처리방법을 구현해야만 한다.

---

### 뷰, View

> 다이얼로그에 존재하는 텍스트박스, 라벨, 버튼 등 사용자 인터페이스(User interface) 요소들을 의미한다. 사용자가 제어하고 데이터를 확인할 수 있는 영역이다. 뷰에서는 별도의 데이터를 보관하지 않습니다. 뷰에서 입력받고 출력해주는 모든 데이터는 모델을 사용해야한다.
> 

- 모델이 가지고 있는 정보를 따로 저장해서는 안된다.
- 모델이나 컨트롤러와 같이 다른 구성요소들을 몰라야 한다.
- 변경이 일어나면 변경통지에 대한 처리방법을 구현해야만 한다.

---

### 컨트롤러, Controller

> 모델과 뷰를 관장하는 브릿지(Bridge)역할을 수행한다. 사용자가 버튼을 클릭하면 이벤트는 뷰에서 발생하지만 내부 처리는 컨트롤러에서 관리하는 것이다. 또한, 입력이 발생하면 이에 대한 통지를 담당한다.
> 

- 모델이나 뷰에 대해서 알고 있어야 한다.
- 모델이나 뷰의 변경을 모니터링 해야 한다.

# 디자인 패턴과 MVC 패턴

### 스트래티지 패턴(전략패턴), Strategy Pattern

<aside>
💡 뷰와 컨트롤러는 고전적인 스트래티지 패턴으로 구현되어 있다.

컨트롤러가 전략을 제공하고, 뷰 객체를 여러 전략을 써서 설정할 수 있다.

스트래티지 패턴을 사용하는 것은 뷰를 모델로부터 분리시키는 데에도 도움이 된다.

사용자가 요청한 내역을 처리하기 위해서는 모델과 얘기를 해야하는 데 그 부분은 컨트롤러가 담당해주기 때문이다. 뷰는 그 방법을 전혀 알지 못한다.

</aside>

- 뷰에서는 애플리케이션의 겉모습(UI)에만 신경을 쓰고, 인터페이스의 행동에 대한 결정은 모두 컨트롤러에게 맡긴다. (사용자의 요청을 컨트롤러로 넘긴다.)
- 컨트롤러는 뷰 객체의 전략 객체에 해당한다. 사용자의 행동에 따라 어떤 행동을 취해야 할지를 알고 있다.
- 컨트롤러를 바꾸면 뷰의 행동을 바꿀 수 있다.

### 컴포지트 패턴, Composite Pattern

<aside>
💡 뷰는 GUI 구성요소(윈도우, 패널, 버튼, 레이블, 텍스트 항목 등)들로 구성된 복합 객체이다.

최상위 구성요소에는 다른 구성요소들이 들어있고, 그 안에는 또 다시 각각 다른 구성요소들이 들어갈 수 있다.

</aside>

- 컨트롤러에서 뷰한테 화면을 갱신해 달라고 요청하면 최상위 뷰 구성요소한테만 화면을 갱신하라고 전달하면 된다. 나머지는 컴포지트 패턴에 의해 자동으로 처리된다.

### 옵저버 패턴, Observer Pattern

<aside>
💡 모델에서는 옵저버 패턴을 사용하여 상태가 변경되었을 때 그 모델하고 연관된 객체들한테 연락을 한다.

옵저버 패턴을 사용하면 모델을 뷰 및 컨트롤러부터 완전히 독립시킬 수 있다.

한 모델에서 서로 다른 뷰를 사용할 수도 있고, 여러 개의 뷰를 동시에 사용할 수도 있다.

</aside>

- 모델의 상태 변화에 관심이 있는 객체라면 어떤 객체든지 모델에 옵저버로 등록할 수 있다.
- 모델의 상태가 변경될 때마다 모든 옵저버들한테 연락이 전달된다.
- 모델은 뷰어나 컨트롤러한테 전혀 의존하지 않는다.